(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4812:function(e,t,s){Promise.resolve().then(s.bind(s,7702))},7702:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return V}});var a=s(3827),n=s(4090);s(9328);var r=s(2020);let l=["Nanami","Naoki"],i=(0,r.Ue)((e,t)=>({messages:[],currentMessage:null,teacher:l[0],language:"English",classroom:"default",speech:"formal",loading:!1,userInteracted:!1,isLesson:!1,setTeacher:s=>{e(()=>({})),e(()=>({teacher:s,messages:t().messages.map(e=>({...e,audioPlayer:null}))}))},setLanguage:t=>{e(()=>({language:t}))},setSpeech:t=>{e(()=>({speech:t}))},markUserInteracted:()=>{e(()=>({userInteracted:!0}))},askAI:async s=>{if(!s)return;let{speech:a,messages:n}=t();e(()=>({loading:!0}));try{let r=await fetch("/api/ai?question=".concat(encodeURIComponent(s))),l=await r.json(),i={question:s,answer:l.result.ReplyForUser,id:n.length,speech:a};e(e=>({currentMessage:i,messages:[...e.messages,i],loading:!1})),t().playMessage(i)}catch(t){console.error("Error fetching AI response:",t),e(()=>({loading:!1}))}},playMessage:async s=>{if(e(()=>({currentMessage:s})),!t().userInteracted){console.warn("Audio playback is blocked until user interaction.");return}if(s.audioPlayer&&s.audioPlayer.paused){s.audioPlayer.play();return}if(t().isLesson)e(()=>({messages:t().messages.map(e=>e.id===s.id?s:e),loading:!1}));else{e(()=>({loading:!0}));try{let a=await fetch("/api/tts?teacher=".concat(t().teacher,"&text=").concat(encodeURIComponent(s.answer),"&language=").concat(t().language));if(!a.ok)throw Error("Failed to fetch audio.");let n=await a.blob(),r=URL.createObjectURL(n),l=new Audio(r);l.onended=()=>{e(()=>({currentMessage:null}))},s.audioPlayer=l,l.play(),e(()=>({messages:t().messages.map(e=>e.id===s.id?s:e),loading:!1}))}catch(t){console.error("Error in playMessage:",t),e(()=>({loading:!1}))}}},stopMessage:t=>{t&&t.audioPlayer&&(t.audioPlayer.pause(),t.audioPlayer.currentTime=0,e(()=>({currentMessage:null})))}}));window.addEventListener("click",()=>i.getState().markUserInteracted(),{once:!0}),window.addEventListener("keydown",()=>i.getState().markUserInteracted(),{once:!0});var o=s(4435),c=s(9811);let d=()=>{let e=i(e=>e.teacher),t=i(e=>e.setTeacher),s=i(e=>e.language),n=i(e=>e.setLanguage);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute left-0 bottom-full flex flex-row gap-10 mb-20",children:l.map((s,n)=>(0,a.jsxs)("div",{className:"p-3 transition-colors duration-500 ".concat(e===s?"bg-white/100":"bg-white/50"),children:[(0,a.jsx)("div",{onClick:()=>t(s),children:(0,a.jsx)("img",{src:"/images/".concat(s,".jpg"),alt:s,className:"object-cover w-40 h-40"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold mt-3 text-center text-black",children:s})]},n))}),(0,a.jsxs)("div",{className:"absolute left-0 top-full flex flex-row gap-2 mt-20",children:[(0,a.jsx)("button",{className:"".concat("English"===s?"text-white bg-slate-900/80":"text-white/45 bg-slate-700/60"," py-4 px-10 text-4xl rounded-full transition-colors duration-500 backdrop-blur-md"),onClick:()=>n("English"),children:"English Accent"}),(0,a.jsx)("button",{className:"".concat("Hindi"===s?"text-white bg-slate-900/80":"text-white/45 bg-slate-700/60"," py-4 px-10 text-4xl rounded-full transition-colors duration-500 backdrop-blur-md"),onClick:()=>n("Hindi"),children:"Hindi Accent"})]})]})},u=e=>{let t=i(e=>e.messages),s=i(e=>e.playMessage),r=i(e=>e.stopMessage),{currentMessage:l}=i(),{isLesson:o}=i(),c=i(e=>e.classroom),d=(0,n.useRef)(),[u,h]=(0,n.useState)(!1);return(o?((0,n.useEffect)(()=>{if(!u||null===l)return;let e=setInterval(()=>{d.current.scrollTop<d.current.scrollHeight-d.current.clientHeight?d.current.scrollTop+=1.1:(clearInterval(e),h(!1))},50);return()=>clearInterval(e)},[t.length,u,l]),(0,n.useEffect)(()=>{t.length>0&&h(!0)},[t])):(0,n.useEffect)(()=>{d.current.scrollTo({top:d.current.scrollHeight,behavior:"smooth"})},[t.length]),o)?(0,a.jsxs)("div",{className:"".concat("default"===c?"w-[1288px] h-[676px]":"w-[2528px] h-[856px]"," p-8 overflow-y-auto flex flex-col space-y-8 bg-transparent opacity-80"),ref:d,children:[0===t.length&&(0,a.jsx)("div",{className:"h-full w-full grid place-content-center text-center",children:(0,a.jsx)("h2",{className:"text-8xl font-bold text-white/90 italic"})}),t.map((e,t)=>(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)("p",{className:"text-4xl inline-block px-2 rounded-sm font-bold bg-clip-text text-transparent bg-gradient-to-br from-blue-300/90 to-white/90",children:(0,a.jsx)("p",{className:"text-4xl inline-block px-2 rounded-sm font-bold bg-clip-text text-transparent bg-gradient-to-br from-blue-300/90 to-white/90",dangerouslySetInnerHTML:{__html:e.answer.replace(/\n/g,"<br />")}})})})})})},t))]}):(0,a.jsxs)("div",{className:"".concat("default"===c?"w-[1288px] h-[676px]":"w-[2528px] h-[856px]"," p-8 overflow-y-auto flex flex-col space-y-8 bg-transparent opacity-80"),ref:d,children:[0===t.length&&(0,a.jsx)("div",{className:"h-full w-full grid place-content-center text-center",children:(0,a.jsxs)("h2",{className:"text-8xl font-bold text-white/90 italic",children:["AI ENGLISH TEACHER",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"English Learning Class"]})}),t.map((e,t)=>(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-grow",children:(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)("p",{className:"text-4xl inline-block px-2 rounded-sm font-bold bg-clip-text text-transparent bg-gradient-to-br from-blue-300/90 to-white/90",children:(0,a.jsx)("p",{className:"text-4xl inline-block px-2 rounded-sm font-bold bg-clip-text text-transparent bg-gradient-to-br from-blue-300/90 to-white/90",dangerouslySetInnerHTML:{__html:e.answer.replace(/\n/g,"<br />")}})})})}),l===e?(0,a.jsx)("button",{className:"text-white/65",onClick:()=>r(e),children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9.563C9 9.252 9.252 9 9.563 9h4.874c.311 0 .563.252.563.563v4.874c0 .311-.252.563-.563.563H9.564A.562.562 0 0 1 9 14.437V9.564Z"})]})}):(0,a.jsx)("button",{className:"text-white/65",onClick:()=>s(e),children:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-16 h-16",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"})]})})]})},t))]})};var h=s(7601),m=s(6959),x=s(3966),g=s(6376),f=s(5511);function p(e){let{teacher:t,...s}=e,r=(0,n.useRef)(),{scene:l}=(0,o.L)("/models/Teacher_".concat(t,".glb"));(0,n.useEffect)(()=>{l.traverse(e=>{e.material&&(e.material=new g.MeshStandardMaterial({map:e.material.map}))})},[l]);let c=i(e=>e.currentMessage),d=i(e=>e.loading),{animations:u}=(0,o.L)("/models/animations_".concat(t,".glb")),{actions:p,mixer:b}=(0,h.v)(u,r),[j,w]=(0,n.useState)("Idle"),[v,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e;let t=()=>{e=setTimeout(()=>{N(!0),setTimeout(()=>{N(!1),t()},100)},(0,f.rO)(1e3,5e3))};return t(),()=>clearTimeout(e)},[]),(0,n.useEffect)(()=>{d?w("Thinking"):c?w((0,f.rO)(0,1)?"Talking":"Talking2"):w("Idle")},[c,d]),(0,x.C)(()=>{y("mouthSmile",.2,.5),y("eye_close",v?1:0,.5);for(let e=0;e<=21;e++)y(e,0,.1);if(c&&c.visemes&&c.audioPlayer){for(let e=c.visemes.length-1;e>=0;e--){let t=c.visemes[e];if(1e3*c.audioPlayer.currentTime>=t[0]){y(t[1],1,.2);break}}p[j].time>p[j].getClip().duration-.5&&w(e=>"Talking"===e?"Talking2":"Talking")}}),(0,n.useEffect)(()=>{var e;return null===(e=p[j])||void 0===e||e.reset().fadeIn(b.time>0?.5:0).play(),()=>{var e;null===(e=p[j])||void 0===e||e.fadeOut(.5)}},[j,p]);let y=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1;l.traverse(a=>{if(a.isSkinnedMesh&&a.morphTargetDictionary){let n=a.morphTargetDictionary[e];void 0!==n&&void 0!==a.morphTargetInfluences[n]&&(a.morphTargetInfluences[n]=g.MathUtils.lerp(a.morphTargetInfluences[n],t,s))}})},[k,S]=(0,n.useState)(".");return(0,n.useEffect)(()=>{if(d){let e=setInterval(()=>{S(e=>3===e.length?".":e+".")},500);return()=>clearInterval(e)}},[d]),(0,a.jsxs)("group",{...s,dispose:null,ref:r,children:[d&&(0,a.jsx)(m.V,{"position-y":"Nanami"===t?1.6:1.8,children:(0,a.jsx)("div",{className:"flex justify-center items-center -translate-x-1/2",children:(0,a.jsxs)("span",{className:"relative flex h-8 w-8 items-center justify-center",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex items-center justify-center duration-75 rounded-full h-8 w-8 bg-white/80",children:k})]})})}),(0,a.jsx)("primitive",{object:l})]})}l.forEach(e=>{o.L.preload("/models/Teacher_".concat(e,".glb")),o.L.preload("/models/animations_".concat(e,".glb"))}),o.L.preload("/models/classroom_default.glb"),s(7953);let b={English:{1:{audioFiles:["/assets/English/1/audio/1.mp3"],textFiles:["/assets/English/1/text/1.txt"],visemes:["/assets/English/1/audio/visemes.json"]}},Hindi:{1:{audioFiles:["/assets/Hindi/1/audio/1.mp3"],textFiles:["/assets/Hindi/1/text/1.txt"],visemes:["/assets/Hindi/1/audio/visemes.json"]}}};var j=e=>{let{closeDoubtsSection:t}=e,s=Array.from({length:90},(e,t)=>"Lesson ".concat(t+1)),[r,l]=(0,n.useState)(null),[i,o]=(0,n.useState)(null),c=async(e,t)=>{try{var s;let a=null===(s=b[e])||void 0===s?void 0:s[t];if(!a)throw Error("Lesson data not found.");let n=await Promise.all(a.textFiles.map(async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch ".concat(e));return t.text()})),r=await Promise.all(a.audioFiles.map(async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch ".concat(e));let s=await t.blob();return URL.createObjectURL(s)})),l=await Promise.all(a.visemes.map(async e=>{let t=await fetch(e);if(!t.ok)throw Error("Failed to fetch ".concat(e));return t.json()}));return{textFiles:n,audioFiles:r,visemes:l}}catch(e){return console.error("Error fetching lesson data: ",e),null}},d=async(e,t)=>{let s=await c(e,t);s?(o(s),l("".concat(e,"-Lesson ").concat(t))):alert("Failed to load lesson data.")};return null===r?(0,a.jsxs)("div",{className:"lessons-container",children:[(0,a.jsx)("h2",{className:"lessons-heading",children:"Lessons"}),(0,a.jsx)("div",{className:"lessons-grid",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"lesson-card",children:[(0,a.jsx)("h3",{children:e}),(0,a.jsx)("p",{children:"Click the button below to start this lesson."}),(0,a.jsxs)("div",{className:"button-container",children:[(0,a.jsx)("button",{className:"play-button",onClick:()=>d("English",t+1),children:"English"}),(0,a.jsx)("button",{className:"play-button",onClick:()=>d("Hindi",t+1),children:"Hindi"})]})]},t))})]}):(0,a.jsx)("h1",{children:"Under Maintainence"})},w=s(6473),v=s(2017),N=s(5451),y=s(9473),k=s(7808),S=s(9631);s(3989);var C=s(8517);let E=e=>{let{showTypingField:t=!0,showVoicePreview:s=!1}=e,r=i(e=>e.askAI),l=i(e=>e.loading),[o,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1),{transcript:h,resetTranscript:m,browserSupportsSpeechRecognition:x}=(0,C.x6)(),g=(0,n.useRef)(null),f=()=>{if(!x){alert("Not supported");return}u(!0),C.ZP.startListening({continuous:!0,language:"en-IN"}),p()},p=()=>{clearTimeout(g.current),g.current=setTimeout(()=>{console.log("No speech detected for 3 seconds. Stopping recording."),b()},3e3)},b=async()=>{u(!1),C.ZP.stopListening();let e=o.trim();clearTimeout(g.current),e&&await j(e),c(""),m()};(0,n.useEffect)(()=>{h.trim()&&p(),c(h)},[h]);let j=async e=>{if(e.trim())try{await r(e),c(""),m()}catch(e){console.error("Error while asking AI:",e)}};return(0,a.jsxs)("div",{className:"relative z-10 flex flex-col bg-gradient-to-tr from-slate-300/30 \n      via-gray-400/30 to-slate-600/30 p-4 backdrop-blur-md rounded-lg border border-slate-100/30 shadow-md \n      transition-all duration-300 ".concat(t?"w-full max-w-[800px]":"w-30"," mx-auto"),children:[t&&(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,a.jsx)("div",{className:"relative w-full",children:(0,a.jsx)("input",{className:"w-full bg-slate-800/60 p-3 rounded-lg text-white placeholder:text-white/50 shadow-inner    focus:outline focus:outline-white/80 text-base md:text-sm pr-10",placeholder:"Ask a question?",value:o,onChange:e=>c(e.target.value),onKeyDown:e=>"Enter"===e.key&&j(o)})}),(0,a.jsxs)("div",{className:"flex gap-2 items-center justify-center",children:[(0,a.jsx)("button",{className:"px-4 py-2 rounded-lg text-white text-sm bg-blue-700 ".concat(o.trim()?"":"opacity-50 pointer-events-auto"),onClick:()=>j(o),onTouchStart:e=>e.stopPropagation(),disabled:!o.trim(),children:"Ask"}),(0,a.jsx)("button",{className:"w-11 h-11 md:w-13 md:h-13 py-1 px-1 rounded-full text-white text-sm ".concat(d?"bg-red-500":"bg-green-500"),onClick:d?b:f,children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M20 12V13C20 17.4183 16.4183 21 12 21C7.58172 21 4 17.4183 4 13V12M12 17C9.79086 17 8 15.2091 8 13V7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7V13C16 15.2091 14.2091 17 12 17Z",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})})]})]}),!t&&(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[s&&h&&(0,a.jsx)("div",{className:"mt-2 p-2 bg-gray-800 text-white rounded-lg shadow",children:(0,a.jsx)("span",{className:"text-center",children:h})}),(0,a.jsx)("button",{className:"w-14 h-14 md:w-16 md:h-16 p-4 rounded-full text-white ".concat(d?"bg-red-500 animate-pulse":"bg-blue-500 hover:bg-blue-700"," text-2xl shadow-lg"),onClick:d?b:f,children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M20 12V13C20 17.4183 16.4183 21 12 21C7.58172 21 4 17.4183 4 13V12M12 17C9.79086 17 8 15.2091 8 13V7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7V13C16 15.2091 14.2091 17 12 17Z",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})})})]}),l&&(0,a.jsx)("div",{className:"flex justify-center items-center pt-4",children:(0,a.jsxs)("span",{className:"relative flex h-5 w-5",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-5 w-5 bg-white"})]})})]})},I=e=>{let{showSidebar:t,setShowSidebar:s,showTypingField:n,setShowTypingField:r,showVoicePreview:l,setShowVoicePreview:i}=e;return(0,a.jsxs)("div",{className:"fixed top-0 right-0 h-full w-64 bg-gray-800 text-white p-4 shadow-lg transform transition-transform duration-300 ".concat(t?"translate-x-0":"translate-x-full"," z-50"),children:[(0,a.jsx)("button",{className:"absolute top-2 right-2 text-gray-300 hover:text-white",onClick:()=>s(!1),children:"✖"}),(0,a.jsx)("h2",{className:"text-2xl mb-4",children:"Settings"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("span",{children:"Show Typing Box"}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:n,onChange:()=>{r(!n)},className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:bg-blue-600 after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white"})]})]}),!n&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("span",{children:"Show Voice Preview"}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:l,onChange:()=>{i(!l)},className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer dark:bg-gray-700 peer-checked:bg-blue-600 after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white"})]})]})]})},L={default:{classroom:{position:[.2,-1.8,-2]},teacher:{position:[-1,-1.8,-3]},board:{position:[.45,.3,-6]}}},T=()=>{let e=i(e=>e.teacher),t=i(e=>e.askAI),s=i(e=>e.classroom),[r,l]=(0,n.useState)(!0),[o,h]=(0,n.useState)(!1),[x,g]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{sessionStorage.getItem("greetingSent")||(t("Welcome Greeting to the user"),sessionStorage.setItem("greetingSent","true"))},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"z-10 md:justify-center fixed bottom-4 left-4 right-4 flex gap-3 flex-wrap justify-stretch",children:(0,a.jsx)(E,{showTypingField:r,showVoicePreview:o})}),(0,a.jsx)("button",{className:"fixed top-4 right-4 p-2 bg-gray-800 text-white rounded-lg shadow-md z-50",onClick:()=>g(!x),children:"⚙️"}),(0,a.jsx)(I,{showSidebar:x,setShowSidebar:g,showTypingField:r,setShowTypingField:l,showVoicePreview:o,setShowVoicePreview:h}),(0,a.jsx)(c.Zf,{hidden:!0}),(0,a.jsx)(w.a,{}),(0,a.jsxs)(S.Xz,{camera:{position:[0,0,1e-4]},children:[(0,a.jsx)(F,{}),(0,a.jsx)(n.Suspense,{children:(0,a.jsxs)(v.b,{speed:.5,floatIntensity:.2,rotationIntensity:.1,children:[(0,a.jsxs)(m.V,{transform:!0,...L[s].board,distanceFactor:1,children:[(0,a.jsx)(u,{}),(0,a.jsx)(d,{})]}),(0,a.jsx)(N.qA,{preset:"sunset"}),(0,a.jsx)("ambientLight",{intensity:.8,color:"pink"}),(0,a.jsx)(y.o,{src:"/models/classroom_".concat(s,".glb"),...L[s].classroom}),(0,a.jsx)(p,{teacher:e,...L[s].teacher,scale:1.5,"rotation-y":(0,f.Id)(20)},e)]})})]})]})},P={loading:[2621880610890309e-20,515037441056466e-20,9636414192870058e-20],speaking:[0,-.00000016481333940859815,9999846226827279e-20],mobileDefault:[36891791593946404e-22,39337346866935065e-22,9985447255153167e-20]},M={default:1.5,loading:1.8,speaking:2.1204819420055387,mobileDefault:.6239784084873344},F=()=>{let e=(0,n.useRef)(),t=i(e=>e.loading),s=i(e=>e.currentMessage),[r,l]=(0,n.useState)(!1),[o,d]=(0,n.useState)({position:[],zoom:1});return(0,n.useEffect)(()=>{let e=()=>{l(window.innerWidth<=768)};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{if(e.current){if(r){var t;e.current.camera.position.set(-4,3,5),null===(t=e.current)||void 0===t||t.setPosition(...P.mobileDefault,!0),e.current.camera.fov=60,e.current.minZoom=.6,e.current.maxZoom=2,e.current.zoomTo(M.mobileDefault)}else e.current.camera.position.set(0,3,5),e.current.camera.fov=60,e.current.zoomTo(M.default),e.current.minZoom=1,e.current.maxZoom=3;e.current.update()}},[r]),(0,n.useEffect)(()=>{var a,n,l,i,o,c,d,u;t?r?(null===(a=e.current)||void 0===a||a.setPosition(2621880610890309e-20,515037441056466e-20,9636414192870058e-20,!0),null===(n=e.current)||void 0===n||n.zoomTo(1.3560873957863966,!0)):(null===(l=e.current)||void 0===l||l.setPosition(...P.loading,!0),null===(i=e.current)||void 0===i||i.zoomTo(M.loading,!0)):s&&(r?(null===(o=e.current)||void 0===o||o.setPosition(-.000005384345998332845,10064011499099357e-21,9934648705775275e-20,!0),null===(c=e.current)||void 0===c||c.zoomTo(.8643233841669705,!0)):(null===(d=e.current)||void 0===d||d.setPosition(...P.speaking,!0),null===(u=e.current)||void 0===u||u.zoomTo(M.speaking,!0)))},[t]),(0,n.useEffect)(()=>{e.current&&d({position:[...e.current.getPosition()],zoom:e.current.camera.zoom})},[]),(0,c.M4)("Camera Settings",{getCameraPosition:(0,c.LI)(()=>{if(e.current){let t=e.current.getPosition(),s=e.current.camera.zoom;console.log("Camera Position:",t),console.log("Camera Zoom:",s)}})}),(0,a.jsx)(k.B,{ref:e,minZoom:r?.6:1,maxZoom:r?2:3,polarRotateSpeed:-.3,azimuthRotateSpeed:-.3,mouseButtons:{left:1,wheel:16},touches:{one:32,two:512}})};o.L.preload("/models/classroom_default.glb");var A=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(T,{})}),z=()=>(0,a.jsx)("div",{children:(0,a.jsx)("h1",{children:"Settings"})}),H=()=>{let[e,t]=(0,n.useState)("userInfo"),[s,r]=(0,n.useState)(67),[l,i]=(0,n.useState)(!1),o=e=>{e&&e.pause&&e.pause(),t("userInfo")};return(0,n.useEffect)(()=>{i(!l)},[e]),(0,a.jsxs)("div",{className:"dashboard-container ".concat(l?"sidebar-hidden":""),children:["doubts"!==e&&(0,a.jsx)("div",{className:"sidebar ".concat(l?"hidden":""),children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"userInfo"===e?"active":"",onClick:()=>t("userInfo"),children:"User Info"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"lessons"===e?"active":"",onClick:()=>t("lessons"),children:"Lessons"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"doubts"===e?"active":"",onClick:()=>t("doubts"),children:"Doubts"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",className:"settings"===e?"active":"",onClick:()=>t("settings"),children:"Profile Settings"})}),(0,a.jsx)("li",{className:"logout",children:(0,a.jsx)("a",{href:"#",className:"logout"===e?"active":"",onClick:()=>{localStorage.removeItem("token"),sessionStorage.removeItem("greetingSent"),window.location.reload()},children:"Logout"})})]})}),(0,a.jsx)("div",{className:"content-section",children:(()=>{switch(e){case"lessons":return(0,a.jsxs)("div",{className:"doubts-section",children:[(0,a.jsx)(j,{closeDoubtsSection:o}),";"]});case"doubts":return(0,a.jsxs)("div",{className:"doubts-section",children:[(0,a.jsx)("button",{className:"close-button",onClick:o,children:"✖"}),(0,a.jsx)(A,{})]});case"settings":return(0,a.jsx)(z,{});default:return(0,a.jsxs)("div",{className:"user-info-section",children:[(0,a.jsx)("h2",{children:"Your Progress"}),(0,a.jsxs)("div",{className:"completed-lessons-section",children:[(0,a.jsxs)("div",{className:"wrapper",children:[(0,a.jsx)("div",{className:"circle left",style:{animationDuration:"".concat(6-s/90*10,"s")}}),(0,a.jsx)("div",{className:"circle right",style:{animationDuration:"".concat(3-s/90*5,"s")}}),(0,a.jsxs)("div",{className:"center-text",children:[s,"/",90]})]}),(0,a.jsx)("button",{className:"continue-button",children:"Continue"})]})]})}})()}),"doubts"!==e&&(0,a.jsx)("button",{className:"toggle-sidebar-button ".concat(l?"rotate":""),onClick:()=>i(!l),children:(0,a.jsx)("img",{src:"https://i.ibb.co/x2nLhXN/arrow-right-svgrepo-com-1.png",alt:"toggle sidebar",className:"arrow-icon"})})]})};s(7341);var _=e=>{let{setIsAuthenticated:t}=e,[s,r]=(0,n.useState)(!0),[l,i]=(0,n.useState)({name:"",email:"",password:"",age:"",highestEducation:""}),[o,c]=(0,n.useState)(""),d=e=>{let{name:t,value:s}=e.target;i(e=>({...e,[t]:s}))},u=async e=>{e.preventDefault();let a=s?{email:l.email,password:l.password}:{name:l.name,email:l.email,password:l.password,age:l.age,highestEducation:l.highestEducation};try{let e=await fetch(s?"/api/auth/login":"/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await e.json();e.ok?s?(localStorage.setItem("token",n.token),t(!0),c("Login Successful!")):c(n.message||"Signup successful!"):c(n.error||"Something went wrong.")}catch(e){c("Error connecting to server."),console.error("Error:",e)}};return(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"form-box",children:[(0,a.jsx)("h2",{children:s?"Login":"Signup"}),(0,a.jsxs)("form",{onSubmit:u,children:[!s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"input-box",children:(0,a.jsx)("input",{type:"text",name:"name",placeholder:"Name",value:l.name,onChange:d,required:!0})}),(0,a.jsx)("div",{className:"input-box",children:(0,a.jsx)("input",{type:"number",name:"age",placeholder:"Age",min:"1",value:l.age,onChange:d,required:!0})}),(0,a.jsx)("div",{className:"input-box",children:(0,a.jsx)("input",{type:"text",name:"highestEducation",placeholder:"Highest Education",value:l.highestEducation,onChange:d,required:!0})})]}),(0,a.jsx)("div",{className:"input-box",children:(0,a.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:l.email,onChange:d,required:!0})}),(0,a.jsx)("div",{className:"input-box",children:(0,a.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:l.password,onChange:d,required:!0})}),(0,a.jsx)("button",{type:"submit",className:"submit-btn",children:"Submit"})]}),o&&(0,a.jsx)("p",{className:"message",children:o}),(0,a.jsxs)("p",{className:"toggle-text",children:[s?"Don't have an account?":"Already have an account?",(0,a.jsx)("button",{onClick:()=>{r(!s),i({name:"",email:"",password:"",age:"",highestEducation:""}),c("")},className:"toggle-btn",children:s?"Sign Up":"Login"})]})]})})};function V(){let[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{localStorage.getItem("token")&&t(!0),r(!1)},[]),s)?(0,a.jsx)("p",{children:"Loading..."}):(0,a.jsx)("main",{className:"h-screen flex flex-col items-center justify-center",children:e?(0,a.jsx)(H,{}):(0,a.jsx)(_,{setIsAuthenticated:t})})}},7341:function(){},9328:function(){},7953:function(){}},function(e){e.O(0,[689,800,366,971,69,744],function(){return e(e.s=4812)}),_N_E=e.O()}]);